# TinyProgrammingLanguage

Haskellで作成した、小さな言語処理系。  
ビルドツールにはstackを利用した。


## 構文

### データ型

* 整数型のみ使用可能

### 算術演算

* 四則演算
* 剰余演算
* 比較演算

### 条件分岐

* if文
* 条件部の値が非0ならばthen節、0ならばelse節の値を返す

```
if x == 1 then 1 else 0
```

### 変数定義

* defキーワードで変数を定義する
* 関数定義は、後述する無名関数を識別子に割り当てることにより実現する


```
def x = 3
def f x = x + 1
```

### 無名関数

* ラムダ式を用いて無名関数を定義する
* funキーワードで定義する
* カリー化している

```
fun x -> x * 2
```

### 関数適用

* 左結合二項演算子"@"を使って、左辺値に右辺値を適用する
* @演算子は二項演算子の中では最も優先度が高い
* 引数が複数ある時は、@で連結する

```
f @ x
g @ x @ y
(fun x -> x * 2) @ 3
```

### クロージャ

* 作成時の変数と値の組を保持する

```
def x = 3
def f y = x + y
f @ 1 => Number 4
def x = 4
f @ 1 => Number 4
```


## サンプル

ファイルからの入力やREPLへの複数行入力に対応していないので、実際には1行で入力する。

#### 階乗

```
def fact n = if n then n * fact @ (n - 1)
             else 1
fact @ 5 => Number 120
```

#### フィボナッチ数

```
def fib n = if n == 0 then 1
            else if n == 1 then 1
            else fib @ (n - 1) + fib @ (n - 2)
fib @ 5 => Number 8
```


## ToDo

* let文を導入する
* 関数適用の構文を「関数 @ 引数」から「関数 引数」のように空白区切りに変更する
* 算術演算の数を増やす
* 扱えるデータ型を増やす
* 算術演算の優先度ごとに文法要素を作るのは非効率なので改善する
* エラー処理を追加する
* ファイルからの読み込みに対応させる
* コメント用の構文を追加する
* テストを自動化させる
